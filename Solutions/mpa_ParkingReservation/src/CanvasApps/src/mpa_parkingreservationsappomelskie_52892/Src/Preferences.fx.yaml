Preferences As screen:
    Fill: =ColorValue(varTheme.neutralBackground2)
    LoadingSpinnerColor: =App.Theme.Colors.Primary
    OnVisible: |-
        =UpdateContext({var_IsAddNew : false});

    conMainContent_Preferences As groupContainer.verticalAutoLayoutContainer:
        Fill: =ColorValue(varTheme.neutralBackground2)
        Height: =Parent.Height - compHeaderCompound_Preferences.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGap: =16
        LayoutMode: =LayoutMode.Auto
        LayoutOverflowY: =LayoutOverflow.Scroll
        PaddingLeft: =
        PaddingRight: =
        PaddingTop: =32
        Width: =Parent.Width
        Y: =compHeaderCompound_Preferences.Y + compHeaderCompound_Preferences.Height
        ZIndex: =3

        conMyPreferences_Preferences As groupContainer.verticalAutoLayoutContainer:
            FillPortions: =0
            Height: =Parent.Height - Parent.PaddingTop - conLower_Preferences.Height - (Parent.LayoutGap *2) -1
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            LayoutOverflowY: =LayoutOverflow.Scroll
            PaddingBottom: =5
            PaddingLeft: |-
                =Switch(App.ActiveScreen.Size,
                5, (App.Width - 1580)/2,
                4, 32,
                3, 20,
                2, 20,
                1, 20
                )
            PaddingRight: =Self.PaddingLeft
            Width: =Parent.Width
            ZIndex: =1

            txtTitle_Preferences As Text:
                AutoHeight: =false
                DisplayMode: =DisplayMode.Edit
                FontColor: =ColorValue(varTheme.neutralForeground1)
                Height: =Self.Size * 1.5
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Size: =varThemeFont.H1.size
                Text: ="Preferences"
                VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                Weight: =varThemeFont.H1.weightBold
                Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                X: =0
                Y: =0
                ZIndex: =1

            conBodyContent_Preferences As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                Fill: =ColorValue(varTheme.neutralBackground2)
                FillPortions: =0
                Height: =conBodyContentInside_Preferences.Height + conBodyContentInsideBottom_Preferences.Height
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingBottom: =20
                Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                ZIndex: =2

                conBodyContentInside_Preferences As groupContainer.verticalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    Fill: =ColorValue(varTheme.neutralBackground2)
                    FillPortions: =0
                    Height: =150
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutGap: =16
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =2
                    PaddingRight: =2
                    Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                    ZIndex: =1

                    txtBuildingitle_Preferences As Text:
                        AutoHeight: =false
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =ColorValue(varTheme.neutralForeground1)
                        Height: =Self.Size * 1.5
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        Size: =varThemeFont.H3.size
                        Text: ="Building"
                        VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                        Weight: =varThemeFont.H3.weightBold
                        Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                        X: =0
                        Y: =0
                        ZIndex: =1

                    conInsideContent_Preferences As groupContainer.verticalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.Semilight
                        Fill: =ColorValue(varTheme.neutralBackground1)
                        FillPortions: =0
                        Height: =80
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingBottom: =16
                        PaddingLeft: =16
                        PaddingRight: =16
                        PaddingTop: =16
                        RadiusBottomLeft: =8
                        RadiusBottomRight: =8
                        RadiusTopLeft: =8
                        RadiusTopRight: =8
                        Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                        ZIndex: =3

                        conInsideLeftBuilding_Preferences As groupContainer.horizontalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            FillPortions: =3
                            Height: =Parent.Height - Parent.PaddingTop - Parent.PaddingBottom
                            LayoutDirection: =LayoutDirection.Vertical
                            LayoutGap: =8
                            LayoutMinHeight: =Parent.Height - txtBuildingitle_Preferences.Height
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            ZIndex: =2

                            txtHeaderBuilding_Preferences As Text:
                                AutoHeight: =false
                                DisplayMode: =DisplayMode.Edit
                                FontColor: =ColorValue(varTheme.neutralForeground1)
                                Height: =Self.Size * 1.5
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                Size: =14
                                Text: ="Select a preferred building"
                                VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                                Weight: =varThemeFont.H2.weightBold
                                Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                                X: =0
                                Y: =0
                                ZIndex: =1

                            txtSubHeaderBuilding_Preferences As Text:
                                AutoHeight: =false
                                DisplayMode: =DisplayMode.Edit
                                FontColor: =ColorValue(varTheme.neutralForeground3)
                                Height: =20
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                Size: =14
                                Text: ="This building will always be pre-selected when you are reserving a spot"
                                Weight: =
                                Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                                X: =0
                                Y: =0
                                ZIndex: =2

                        conInsideRightBuilding_Preferences As groupContainer.horizontalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Height: =conInsideLeftBuilding_Preferences.Height
                            LayoutDirection: =LayoutDirection.Vertical
                            LayoutMinHeight: =conInsideLeftBuilding_Preferences.Height
                            LayoutMinWidth: =300
                            LayoutMode: =LayoutMode.Auto
                            PaddingLeft: =2
                            PaddingRight: =2
                            ZIndex: =3

                            cmbBuilding_Preferences As Combobox.pcfdataset:
                                AccessibleLabel: ="Preferred Building"
                                Appearance: ="FilledDarker"
                                DefaultSelectedItems: =LookUp(Users, User = varD365User.User).'Preferred Building'
                                DisplayMode: =DisplayMode.Edit
                                Font: =""
                                FontItalic: =
                                FontSize: =0
                                FontWeight: =""
                                Height: =32
                                Items: =Buildings
                                LayoutMinHeight: =32
                                LayoutMinWidth: =320
                                OnChange: =false
                                SelectMultiple: =false
                                ValidationState: ="None"
                                Width: =Parent.Width - Parent.PaddingLeft * 2
                                X: =0
                                Y: =0
                                ZIndex: =1

                                Name As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                    FieldDisplayName: ="Name"
                                    FieldName: ="mpa_name"
                                    FieldType: ="s"
                                    FieldVariantName: ="textualColumn"
                                    Order: =1
                                    ZIndex: =16

                                "'Book in Advance Days' As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn":
                                    FieldDisplayName: ="Book in Advance Days"
                                    FieldName: ="mpa_bookinadvancedays"
                                    FieldType: ="n"
                                    FieldVariantName: ="textualColumn"
                                    Order: =2
                                    ZIndex: =17

                                "'Cancellation Policy Days' As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn":
                                    FieldDisplayName: ="Cancellation Policy Days"
                                    FieldName: ="mpa_cancellationpolicydays"
                                    FieldType: ="n"
                                    FieldVariantName: ="textualColumn"
                                    Order: =3
                                    ZIndex: =18

                                Country As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                    FieldDisplayName: ="Country"
                                    FieldName: ="mpa_country"
                                    FieldType: ="s"
                                    FieldVariantName: ="textualColumn"
                                    Order: =4
                                    ZIndex: =19

                                StateName As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                    FieldDisplayName: ="State"
                                    FieldName: ="mpa_state"
                                    FieldType: ="s"
                                    FieldVariantName: ="textualColumn"
                                    Order: =5
                                    ZIndex: =20

                                Street As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                    FieldDisplayName: ="Street"
                                    FieldName: ="mpa_street"
                                    FieldType: ="s"
                                    FieldVariantName: ="textualColumn"
                                    Order: =6
                                    ZIndex: =21

                                "'Zip Code' As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn":
                                    FieldDisplayName: ="Zip Code"
                                    FieldName: ="mpa_zipcode"
                                    FieldType: ="s"
                                    FieldVariantName: ="textualColumn"
                                    Order: =7
                                    ZIndex: =22

                                City As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                    FieldDisplayName: ="City"
                                    FieldName: ="mpa_city"
                                    FieldType: ="s"
                                    FieldVariantName: ="textualColumn"
                                    Order: =8
                                    ZIndex: =23

                conBodyContentInsideBottom_Preferences As groupContainer.verticalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    Fill: =ColorValue(varTheme.neutralBackground2)
                    FillPortions: =0
                    Height: =conInsideVehicle_Preferences.Height + 100
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutGap: =16
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =20
                    PaddingLeft: =2
                    PaddingRight: =2
                    PaddingTop: =20
                    Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                    ZIndex: =2

                    txtVehicleTitle_Preferences As Text:
                        AutoHeight: =false
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =ColorValue(varTheme.neutralForeground1)
                        Height: =Self.Size * 1.5
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        Size: =varThemeFont.H3.size
                        Text: ="Vehicles"
                        VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                        Weight: =varThemeFont.H3.weightBold
                        Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                        X: =0
                        Y: =0
                        ZIndex: =1

                    conInsideVehicle_Preferences As groupContainer.verticalAutoLayoutContainer:
                        DropShadow: =DropShadow.Semilight
                        Fill: =ColorValue(varTheme.neutralBackground1)
                        FillPortions: =0
                        Height: =conAddVehicle_Preferences.Height + conInsideContentVehicle_Preferences.Height 
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingBottom: =2
                        RadiusBottomLeft: =8
                        RadiusBottomRight: =8
                        RadiusTopLeft: =8
                        RadiusTopRight: =8
                        Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                        ZIndex: =4

                        conInsideContentVehicle_Preferences As groupContainer.verticalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            Fill: =ColorValue(varTheme.neutralBackground1)
                            FillPortions: =0
                            Height: =80
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            PaddingBottom: =16
                            PaddingLeft: =16
                            PaddingRight: =16
                            PaddingTop: =16
                            Width: =Parent.Width
                            ZIndex: =1

                            conInsideLeftVehicle_Preferences As groupContainer.horizontalAutoLayoutContainer:
                                AlignInContainer: =AlignInContainer.SetByContainer
                                Fill: =ColorValue(varTheme.neutralBackground1)
                                FillPortions: =3
                                Height: =Parent.Height - Parent.PaddingTop - Parent.PaddingBottom
                                LayoutDirection: =LayoutDirection.Vertical
                                LayoutGap: =8
                                LayoutMinHeight: =Parent.Height - txtVehicleTitle_Preferences.Height
                                LayoutMinWidth: =250
                                LayoutMode: =LayoutMode.Auto
                                ZIndex: =2

                                txtHeaderVehicles_Preferences As Text:
                                    AutoHeight: =false
                                    DisplayMode: =DisplayMode.Edit
                                    FontColor: =ColorValue(varTheme.neutralForeground1)
                                    Height: =Self.Size * 1.5
                                    LayoutMinHeight: =32
                                    LayoutMinWidth: =96
                                    Size: =14
                                    Text: ="Select a preferred vehicle"
                                    VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                                    Weight: =varThemeFont.H2.weightBold
                                    Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                                    X: =0
                                    Y: =0
                                    ZIndex: =1

                                txtSubHeaderVehicles_Preferences As Text:
                                    AutoHeight: =false
                                    DisplayMode: =DisplayMode.Edit
                                    FontColor: =ColorValue(varTheme.neutralForeground3)
                                    Height: =20
                                    LayoutMinHeight: =32
                                    LayoutMinWidth: =96
                                    Size: =14
                                    Text: ="This vehicle will always be pre-selected when you are reserving a spot"
                                    Weight: =
                                    Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                                    X: =0
                                    Y: =0
                                    ZIndex: =2

                            conInsideRightVehicles_Preferences As groupContainer.horizontalAutoLayoutContainer:
                                AlignInContainer: =AlignInContainer.SetByContainer
                                Fill: =ColorValue(varTheme.neutralBackground1)
                                Height: =conInsideLeftVehicle_Preferences.Height
                                LayoutDirection: =LayoutDirection.Vertical
                                LayoutMinHeight: =conInsideLeftVehicle_Preferences.Height
                                LayoutMinWidth: =250
                                LayoutMode: =LayoutMode.Auto
                                PaddingLeft: =2
                                PaddingRight: =2
                                ZIndex: =3

                                cmbVehicles_Preferences As Combobox.pcfdataset:
                                    AccessibleLabel: ="Preferred Vehicles"
                                    Appearance: ="FilledDarker"
                                    DefaultSelectedItems: =LookUp(Users, User = varD365User.User).'Preferred Vehicle'
                                    DisplayMode: =If(IsEmpty(Filter(Vehicles, 'Vehicles (Views)'.'My Vehicles')) , DisplayMode.Disabled , DisplayMode.Edit)
                                    Font: =""
                                    FontItalic: =
                                    FontSize: =0
                                    FontWeight: =""
                                    Height: =32
                                    Items: =Filter(Vehicles, 'Vehicles (Views)'.'My Vehicles')
                                    LayoutMinHeight: =32
                                    LayoutMinWidth: =320
                                    OnChange: =false
                                    SelectMultiple: =false
                                    ValidationState: ="None"
                                    Width: =Parent.Width - Parent.PaddingLeft * 2
                                    X: =0
                                    Y: =0
                                    ZIndex: =1

                                    Name2 As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                        FieldDisplayName: ="Name"
                                        FieldName: ="mpa_name"
                                        FieldType: ="s"
                                        FieldVariantName: ="textualColumn"
                                        Order: =1
                                        ZIndex: =24

                                    "'Plate Number2' As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn":
                                        FieldDisplayName: ="Plate Number"
                                        FieldName: ="mpa_platenumber"
                                        FieldType: ="s"
                                        FieldVariantName: ="textualColumn"
                                        Order: =2
                                        ZIndex: =25

                                    "'Status Reason2' As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn":
                                        FieldDisplayName: ="Status Reason"
                                        FieldName: ="statuscode"
                                        FieldType: ="l"
                                        FieldVariantName: ="textualColumn"
                                        Order: =4
                                        ZIndex: =26

                                    Status2 As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn:
                                        FieldDisplayName: ="Status"
                                        FieldName: ="statecode"
                                        FieldType: ="l"
                                        FieldVariantName: ="textualColumn"
                                        Order: =5
                                        ZIndex: =27

                                    "'Created On2' As PowerApps_CoreControls_ComboboxCanvasTemplate_dataField.textualColumn":
                                        FieldDisplayName: ="Created On"
                                        FieldName: ="createdon"
                                        FieldType: ="d"
                                        FieldVariantName: ="textualColumn"
                                        Order: =6
                                        ZIndex: =28

                        shpRectLineVehicles_Preferences As rectangle:
                            AccessibleLabel: =
                            BorderColor: =App.Theme.Colors.Primary
                            DisabledFill: =ColorValue(varTheme.neutralBackgroundDisabled)
                            DisplayMode: =DisplayMode.Disabled
                            Fill: =ColorValue(varTheme.neutralStroke2)
                            FocusedBorderColor: =App.Theme.Colors.Primary
                            Height: =1
                            PressedFill: =App.Theme.Colors.Primary
                            Width: =Parent.Width
                            Y: =50
                            ZIndex: =2

                        conAddVehicle_Preferences As groupContainer.verticalAutoLayoutContainer:
                            Fill: =ColorValue(varTheme.neutralBackground1)
                            FillPortions: =0
                            Height: =conGridBottom_Preferences.Height + 50
                            LayoutDirection: =LayoutDirection.Vertical
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            PaddingLeft: =16
                            PaddingRight: =16
                            PaddingTop: =16
                            ZIndex: =3

                            txtMyVehicles_Preferences As Text:
                                AutoHeight: =false
                                DisplayMode: =DisplayMode.Edit
                                FontColor: =ColorValue(varTheme.neutralForeground1)
                                Height: =Self.Size * 1.5
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                Size: =14
                                Text: ="My vehicles"
                                VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                                Weight: =varThemeFont.H2.weightBold
                                Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                                X: =0
                                Y: =0
                                ZIndex: =1

                            txtSubHeaderMyVehicles_Preferences As Text:
                                AutoHeight: =false
                                DisplayMode: =DisplayMode.Edit
                                FontColor: =ColorValue(varTheme.neutralForeground3)
                                Height: =20
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                Size: =14
                                Text: ="The vehicles added in this list will be available as options when you are reserving a spot"
                                Weight: =
                                Width: =Parent.Width - Parent.PaddingLeft - Parent.PaddingRight
                                X: =0
                                Y: =0
                                ZIndex: =2

                            conGridBottom_Preferences As groupContainer.verticalAutoLayoutContainer:
                                FillPortions: =0
                                Height: =conAddNewVehicle_Preference.Height + galMyVehicles_Preference.Height + conGridLable_Preferences.Height
                                LayoutDirection: =LayoutDirection.Vertical
                                LayoutMinHeight: =100
                                LayoutMinWidth: =250
                                LayoutMode: =LayoutMode.Auto
                                Width: =Parent.Width
                                ZIndex: =3

                                conGridLable_Preferences As groupContainer.horizontalAutoLayoutContainer:
                                    AlignInContainer: =AlignInContainer.SetByContainer
                                    FillPortions: =0
                                    Height: =50
                                    LayoutGap: =15
                                    LayoutMinHeight: =100
                                    LayoutMinWidth: =250
                                    LayoutMode: =LayoutMode.Auto
                                    PaddingTop: =18
                                    Width: =Parent.Width
                                    ZIndex: =1

                                    txtLabelNickname_Preferences As Text:
                                        AutoHeight: =false
                                        DisplayMode: =DisplayMode.Edit
                                        FontColor: =ColorValue(varTheme.neutralForeground1)
                                        Height: =20
                                        LayoutMinHeight: =32
                                        LayoutMinWidth: =96
                                        Size: =14
                                        Text: ="Nickname"
                                        Weight: =
                                        Width: =(Parent.Width - Parent.PaddingLeft - Parent.PaddingRight ) / 4
                                        X: =0
                                        Y: =0
                                        ZIndex: =1

                                    txtLabelPlatenumber_Preferences As Text:
                                        AutoHeight: =false
                                        DisplayMode: =DisplayMode.Edit
                                        FontColor: =ColorValue(varTheme.neutralForeground1)
                                        Height: =20
                                        LayoutMinHeight: =32
                                        LayoutMinWidth: =96
                                        Size: =14
                                        Text: ="Plate number"
                                        Weight: =
                                        Width: =(Parent.Width - Parent.PaddingLeft - Parent.PaddingRight ) / 4
                                        X: =0
                                        Y: =0
                                        ZIndex: =2

                                galMyVehicles_Preference As gallery.variableTemplateHeightGallery:
                                    AccessibleLabel: ="My Vehicles"
                                    AlignInContainer: =AlignInContainer.SetByContainer
                                    BorderColor: =App.Theme.Colors.Darker40
                                    DelayItemLoading: =true
                                    FillPortions: =0
                                    Height: =Self.TemplateHeight * Self.AllItemsCount
                                    Items: =Filter(Vehicles, 'Vehicles (Views)'.'My Vehicles')
                                    Layout: =Layout.Vertical
                                    LayoutMinHeight: =100
                                    LayoutMinWidth: =320
                                    LoadingSpinner: =LoadingSpinner.Data
                                    TabIndex: =0
                                    TemplatePadding: =0
                                    TemplateSize: =45
                                    Width: =Parent.Width
                                    ZIndex: =2

                                    conGridMyVehicles_Preferences As groupContainer.horizontalAutoLayoutContainer:
                                        Height: =Parent.TemplateHeight
                                        LayoutGap: =15
                                        LayoutMode: =LayoutMode.Auto
                                        LayoutOverflowY: =LayoutOverflow.Scroll
                                        PaddingTop: =5
                                        Width: =Parent.TemplateWidth
                                        ZIndex: =1

                                        "txiNicknameGrid_Preference As 'Text input'":
                                            AccessibleLabel: ="Nickname"
                                            Appearance: ="FilledDarker"
                                            BasePaletteColor: =
                                            DisplayMode: =DisplayMode.View
                                            Font: =""
                                            FontColor: =ColorValue(varTheme.neutralForeground1)
                                            FontItalic: =
                                            FontSize: =
                                            FontWeight: =
                                            Height: =32
                                            LayoutMinHeight: =32
                                            LayoutMinWidth: =320
                                            Mode: ='TextInputCanvas.Mode'.SingleLine
                                            Placeholder: =ThisItem.Name
                                            Type: ='TextInputCanvas.Type'.Text
                                            ValidationState: =If(IsBlank(Self.Value) ,"Error" , "None")
                                            Value: =ThisItem.Name
                                            Width: =(Parent.Width - Parent.PaddingLeft - Parent.PaddingRight ) / 4
                                            X: =0
                                            Y: =0
                                            ZIndex: =1

                                        "txiPrimaryGrid_Preference As 'Text input'":
                                            AccessibleLabel: ="Plate number"
                                            Appearance: ="FilledDarker"
                                            BasePaletteColor: =
                                            DisplayMode: =DisplayMode.View
                                            Font: =""
                                            FontColor: =ColorValue(varTheme.neutralForeground1)
                                            FontItalic: =
                                            FontSize: =
                                            FontWeight: =
                                            Height: =32
                                            LayoutMinHeight: =32
                                            LayoutMinWidth: =320
                                            Mode: ='TextInputCanvas.Mode'.SingleLine
                                            Placeholder: =ThisItem.'Plate Number'
                                            Type: ='TextInputCanvas.Type'.Text
                                            ValidationState: =If(IsBlank(Self.Value) ,"Error" , "None")
                                            Value: =ThisItem.'Plate Number'
                                            Width: =(Parent.Width - Parent.PaddingLeft - Parent.PaddingRight ) / 8
                                            X: =0
                                            Y: =0
                                            ZIndex: =2

                                        btnRemove_Preference As Button:
                                            AccessibleLabel: ="Remove"
                                            Align: =""
                                            Appearance: ='ButtonCanvas.Appearance'.Transparent
                                            BasePaletteColor: =
                                            DisplayMode: =DisplayMode.Edit
                                            Font: =""
                                            FontColor: =
                                            FontItalic: =false
                                            FontSize: =0
                                            FontWeight: =""
                                            Height: =32
                                            Icon: =""
                                            IconRotation: =0
                                            IconStyle: ="Outline"
                                            Layout: ="Icon before"
                                            LayoutMinHeight: =32
                                            LayoutMinWidth: =96
                                            OnSelect: |
                                                =IfError(
                                                    RemoveIf(
                                                        Vehicles,
                                                        Vehicle = ThisItem.Vehicle
                                                    );
                                                    
                                                //Will remove the Data from dataverse 
                                                ,//else
                                                    Notify(
                                                        "Error on removing vehicle. :" & FirstError.Message,
                                                        NotificationType.Error,
                                                        2000
                                                    );
                                                    false; //will not continue on notification removed
                                                    ,
                                                    Notify(
                                                        "Vehicle has been removed.",
                                                        NotificationType.Success,
                                                        2000
                                                    );
                                                    
                                                );
                                            Text: ="Remove"
                                            VerticalAlign: =""
                                            Width: =125
                                            X: =0
                                            Y: =0
                                            ZIndex: =4

                                conAddNewVehicle_Preference As groupContainer.horizontalAutoLayoutContainer:
                                    AlignInContainer: =AlignInContainer.SetByContainer
                                    FillPortions: =0
                                    Height: =60
                                    LayoutGap: =15
                                    LayoutMinHeight: =100
                                    LayoutMinWidth: =250
                                    LayoutMode: =LayoutMode.Auto
                                    LayoutOverflowY: =LayoutOverflow.Scroll
                                    PaddingBottom: =5
                                    PaddingTop: =5
                                    Width: =Parent.Width
                                    ZIndex: =3

                                    "txiNickNameNew_Preference As 'Text input'":
                                        AccessibleLabel: ="Nickname"
                                        Appearance: ="FilledDarker"
                                        BasePaletteColor: =
                                        DisplayMode: =DisplayMode.Edit
                                        Font: =""
                                        FontColor: =
                                        FontItalic: =
                                        FontSize: =
                                        FontWeight: =
                                        Height: =32
                                        LayoutMinHeight: =32
                                        LayoutMinWidth: =320
                                        Mode: ='TextInputCanvas.Mode'.SingleLine
                                        OnChange: =Trim(Self.Value)
                                        Placeholder: ="Enter nickname"
                                        Type: ='TextInputCanvas.Type'.Text
                                        ValidationState: =If(IsBlank(Self.Value) && var_IsAddNew ,"Error" , "None")
                                        Value: =
                                        Width: =(Parent.Width - Parent.PaddingLeft - Parent.PaddingRight ) / 4
                                        X: =0
                                        Y: =0
                                        ZIndex: =1

                                    "txiPrimaryPlateNumberNew_Preference As 'Text input'":
                                        AccessibleLabel: ="Plate number"
                                        Appearance: ="FilledDarker"
                                        BasePaletteColor: =
                                        DisplayMode: =DisplayMode.Edit
                                        Font: =""
                                        FontColor: =
                                        FontItalic: =
                                        FontSize: =
                                        FontWeight: =
                                        Height: =32
                                        LayoutMinHeight: =32
                                        LayoutMinWidth: =320
                                        Mode: ='TextInputCanvas.Mode'.SingleLine
                                        OnChange: |-
                                            =Set(varPlateNumber , Self.Value);
                                            Trim(Self.Value);
                                        Placeholder: ="Enter plate number"
                                        Type: ='TextInputCanvas.Type'.Text
                                        ValidationState: =If(IsBlank(Self.Value) && var_IsAddNew ,"Error" , "None")
                                        Value: =Upper(varPlateNumber)
                                        Width: =(Parent.Width - Parent.PaddingLeft - Parent.PaddingRight ) / 8
                                        X: =0
                                        Y: =0
                                        ZIndex: =2

                                    btnAddNewVehicle_Preference As Button:
                                        AccessibleLabel: ="Add new vehicle"
                                        Align: =""
                                        Appearance: ='ButtonCanvas.Appearance'.Primary
                                        BasePaletteColor: =
                                        DisplayMode: =If(And(Trim(txiNickNameNew_Preference.Value) <> "" , Trim(txiPrimaryPlateNumberNew_Preference.Value) <> "") , DisplayMode.Edit, DisplayMode.Disabled)
                                        Font: =""
                                        FontColor: =
                                        FontItalic: =
                                        FontSize: =0
                                        FontWeight: =""
                                        Height: =32
                                        Icon: =""
                                        IconRotation: =0
                                        IconStyle: ="Outline"
                                        Layout: ="Icon before"
                                        LayoutMinHeight: =32
                                        LayoutMinWidth: =96
                                        OnSelect: |
                                            =If(
                                                And(
                                                    txiNickNameNew_Preference.ValidationState <> "Error",
                                                    txiPrimaryPlateNumberNew_Preference.ValidationState <> "Error",
                                                    Or(var_IsAddNew , And(txiNickNameNew_Preference.Value <> "" , txiPrimaryPlateNumberNew_Preference.Value <> ""))
                                                ),
                                                IfError(
                                                    Patch(
                                                        Vehicles,
                                                        Defaults(Vehicles),
                                                        {
                                                            Name: txiNickNameNew_Preference.Value,
                                                            'Plate Number': txiPrimaryPlateNumberNew_Preference.Value
                                                        }
                                                    );
                                                    ,//If error else
                                                    Notify(
                                                        "Error on saving vehicle. :" & FirstError.Message,
                                                        NotificationType.Error,
                                                        2000
                                                    );
                                                    false;
                                                    ,//continue
                                                    Notify(
                                                        "Vehicle has been added.",
                                                        NotificationType.Success,
                                                        2000
                                                    );
                                                    UpdateContext({var_IsAddNew : false});
                                                    //Reset the text input
                                                    Reset(txiNickNameNew_Preference);
                                                    Reset(txiPrimaryPlateNumberNew_Preference);
                                                    Set(
                                                    varPlateNumber,
                                                    ""
                                                    )   
                                            
                                                );    
                                            ,
                                                //Else
                                                UpdateContext({var_IsAddNew : true});
                                                Notify(
                                                    "Please fill up the required fields.",
                                                    NotificationType.Error,
                                                    2000;
                                                )
                                            );
                                        Text: ="Add new vehicle"
                                        VerticalAlign: =""
                                        Width: =140
                                        X: =0
                                        Y: =0
                                        ZIndex: =5

        shpDividerBottom_Preferences As rectangle:
            AccessibleLabel: =//customize the accesible label based in the shape
            BorderColor: =App.Theme.Colors.Primary
            BorderStyle: =BorderStyle.None
            DisabledFill: =ColorValue(varTheme.neutralBackgroundDisabled)
            Fill: =ColorValue(varTheme.neutralStroke2)
            FocusedBorderColor: =App.Theme.Colors.Primary
            FocusedBorderThickness: =4
            Height: =1
            HoverFill: =App.Theme.Colors.Darker20
            PressedFill: =App.Theme.Colors.Primary
            Width: =Parent.Width
            Y: =79
            ZIndex: =2

        conLower_Preferences As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =btnSave_Preferences.Height + Self.PaddingTop + Self.PaddingBottom
            LayoutGap: =8
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            PaddingBottom: =16
            PaddingLeft: |-
                =Switch(App.ActiveScreen.Size,
                5, (App.Width - 1580)/2,
                4, 32,
                3, 20,
                2, 20,
                1, 20
                )
            PaddingRight: =Self.PaddingLeft
            PaddingTop: =16
            Width: =Parent.Width
            ZIndex: =3

            btnSave_Preferences As Button:
                AccessibleLabel: ="Reserve"
                Align: =""
                BasePaletteColor: =
                DisplayMode: |-
                    =If(
                        cmbBuilding_Preferences.Selected.Building <> LookUp(Users, User = varD365User.User, 'Preferred Building'.Building) || 
                        cmbVehicles_Preferences.Selected.Vehicle <> LookUp(Users, User = varD365User.User, 'Preferred Vehicle'.Vehicle),
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )
                Font: =""
                FontColor: =
                FontItalic: =
                FontSize: =0
                FontWeight: =""
                Height: =32
                Icon: =""
                IconRotation: =0
                IconStyle: ="Outline"
                Layout: ="Icon before"
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                OnSelect: |
                    =Set(
                        varFromPreference_Save,
                        true
                    );
                    Set(
                        varFromPreference_Cancel,
                        false
                    );
                    Navigate(
                        'Confirmation Screen',
                        Transition.None,
                        {
                            varHeader: "Confirm changes",
                            varMessage: "Are you sure you want to save your changes?"
                        }
                    );
                Text: ="Save"
                VerticalAlign: =""
                Width: =74
                X: =10
                Y: =10
                ZIndex: =3

            btnCancel_Preferences As Button:
                AccessibleLabel: ="Cancel"
                Align: =""
                Appearance: ='ButtonCanvas.Appearance'.Secondary
                BasePaletteColor: =
                DisplayMode: |-
                    =If(
                        cmbBuilding_Preferences.Selected.Building <> LookUp(Users, User = varD365User.User, 'Preferred Building'.Building) || 
                        cmbVehicles_Preferences.Selected.Vehicle <> LookUp(Users, User = varD365User.User, 'Preferred Vehicle'.Vehicle),
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )
                Font: =""
                FontColor: =
                FontItalic: =
                FontSize: =0
                FontWeight: =""
                Height: =32
                Icon: =""
                IconRotation: =0
                IconStyle: ="Outline"
                Layout: ="Icon before"
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                OnSelect: |-
                    =
                    Set(
                        varFromPreference_Cancel,
                        true
                    );
                    Set(varFromPreference_Save, false);
                    
                    Navigate(
                        'Confirmation Screen',
                        Transition.None,
                        {
                            varHeader: "Confirm cancelation",
                            varMessage: "Are you sure you want to cancel your changes?"
                        }
                    );
                Text: ="Discard"
                VerticalAlign: =""
                Width: =66
                X: =btnSave_Preferences.Width + btnSave_Preferences.X +10
                Y: =btnSave_Preferences.Y
                ZIndex: =4

    compHeaderCompound_Preferences As compHeaderCompound:
        HeaderWidth: =Parent.Width
        Height: =compHeaderCompound_Preferences.HeaderHeight
        Width: =compHeaderCompound_Preferences.HeaderWidth
        ZIndex: =4

